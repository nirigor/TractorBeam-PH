<div *ngIf="dataSource.isLoading$ | async" class="loading">
    <mat-spinner diameter=70 strokeWidth=5></mat-spinner>
    <p class="mat-headline-4">Loading Data...</p>
</div>

<div *ngIf="!(dataSource.isLoading$ | async)" class="table-container">
    <mat-tab-group style="width: 100%;">
        <mat-tab label="Directory">
            <div class="table">
                <table 
                    mat-table 
                    matSort 
                    matSortActive="StorageId"
                    matSortDirection="asc"
                    matSortDisableClear
                    (matSortChange)="sortDirectoryQuotas($event)"
                    [dataSource]="dataSource">
                    <ng-container matColumnDef="StorageId">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Storage </th>
                        <td mat-cell *matCellDef="let element">{{element.StorageId}}</td>
                    </ng-container>
                
                    <ng-container matColumnDef="QuotaPath">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Path </th>
                        <td mat-cell *matCellDef="let element">{{element.QuotaPath}}</td>
                    </ng-container>
                
                    <ng-container matColumnDef="QuotaUsed">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Used </th>
                        <td mat-cell *matCellDef="let element">{{element.QuotaUsed | sI}}</td>
                    </ng-container>
                
                    <ng-container matColumnDef="QuotaHard">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Hard Limit </th>
                        <td mat-cell *matCellDef="let element">{{element.QuotaHard | sI}}</td>
                    </ng-container>
                    
                    <ng-container matColumnDef="QuotaId">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-icon-button>
                                <mat-icon>edit</mat-icon>
                            </button>
                        </td>
                    </ng-container>
        
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                
                    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                
                    <tr *matNoDataRow>
                        <td [attr.colspan]="displayedColumns.length" class="mat-headline-5" style="text-align: center;">No data matching the filter "{{filterValue}}"</td>
                    </tr>
                </table>
                
                <mat-paginator 
                    [length]="dataSource.length"
                    [pageSize]="10"
                    [pageSizeOptions]="[10, 25, 50]" 
                    [showFirstLastButtons]="true"
                    [pageIndex]="currentPage"
                    (page)="handlePageEvent($event)"
                ></mat-paginator>
            </div>
        </mat-tab>
        <mat-tab label="User">
            <div class="table">
                <table 
                    mat-table 
                    matSort 
                    matSortActive="StorageId"
                    matSortDirection="asc"
                    matSortDisableClear
                    (matSortChange)="sortDirectoryQuotas($event)"
                    [dataSource]="dataSource">
                    <ng-container matColumnDef="StorageId">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Storage </th>
                        <td mat-cell *matCellDef="let element">{{element.StorageId}}</td>
                    </ng-container>
                
                    <ng-container matColumnDef="QuotaPath">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Path </th>
                        <td mat-cell *matCellDef="let element">{{element.QuotaPath}}</td>
                    </ng-container>
                
                    <ng-container matColumnDef="QuotaUsed">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Used </th>
                        <td mat-cell *matCellDef="let element">{{element.QuotaUsed | sI}}</td>
                    </ng-container>
                
                    <ng-container matColumnDef="QuotaHard">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef> Hard Limit </th>
                        <td mat-cell *matCellDef="let element">{{element.QuotaHard | sI}}</td>
                    </ng-container>
                    
                    <ng-container matColumnDef="QuotaId">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-icon-button>
                                <mat-icon>edit</mat-icon>
                            </button>
                        </td>
                    </ng-container>
        
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                
                    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                
                    <tr *matNoDataRow>
                        <td [attr.colspan]="displayedColumns.length" class="mat-headline-5" style="text-align: center;">No data matching the filter "{{filterValue}}"</td>
                    </tr>
                </table>
                
                <mat-paginator 
                    [length]="dataSource.length"
                    [pageSize]="10"
                    [pageSizeOptions]="[10, 25, 50]" 
                    [showFirstLastButtons]="true"
                    [pageIndex]="currentPage"
                    (page)="handlePageEvent($event)"
                ></mat-paginator>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>